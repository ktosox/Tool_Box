[gd_scene load_steps=72 format=2]

[ext_resource path="res://WJ48/Shader_Texture_11.png" type="Texture" id=1]
[ext_resource path="res://WJ48/Shader_Texture_1.png" type="Texture" id=2]
[ext_resource path="res://WJ48/Noise5.png" type="Texture" id=3]
[ext_resource path="res://WJ48/32x32Ghost_Float.png" type="Texture" id=4]
[ext_resource path="res://WJ48/Guide.png" type="Texture" id=5]
[ext_resource path="res://WJ48/Special1.png" type="Texture" id=6]
[ext_resource path="res://WJ48/Wisp.png" type="Texture" id=7]
[ext_resource path="res://WJ48/Noise1.png" type="Texture" id=8]
[ext_resource path="res://WJ48/Noise4.png" type="Texture" id=9]
[ext_resource path="res://WJ48/Flame1.png" type="Texture" id=10]
[ext_resource path="res://WJ48/Wisp2.png" type="Texture" id=11]
[ext_resource path="res://WJ48/Noise2.png" type="Texture" id=12]
[ext_resource path="res://WJ48/Square.png" type="Texture" id=13]
[ext_resource path="res://WJ48/Glow2.png" type="Texture" id=14]
[ext_resource path="res://Resources/Particles/orb1.png" type="Texture" id=15]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;
uniform vec2 scrollSpeed = vec2(1.0,1.0);
uniform sampler2D texture2;
uniform sampler2D gradient;

void fragment(){
	float color1 = texture(TEXTURE, UV + scrollSpeed * TIME).r;
	float color2 = texture(texture2, UV + scrollSpeed * TIME).r;
	float energ = color1 * color2 - (0.4 - UV.y) - (smoothstep(0.0,0.3,abs(UV.x-0.5)*0.5) * 3.0 );
	COLOR = texture(gradient, vec2(energ));
}"

[sub_resource type="Gradient" id=2]
interpolation_mode = 1
offsets = PoolRealArray( 0, 0.0900322, 0.5209 )
colors = PoolColorArray( 0, 0, 0, 0, 0.231373, 0.141176, 0.356863, 0.764706, 0, 0, 0, 1 )

[sub_resource type="GradientTexture" id=3]
gradient = SubResource( 2 )

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 1 )
shader_param/scrollSpeed = Vector2( -0.481, 0.822 )
shader_param/texture2 = ExtResource( 1 )
shader_param/gradient = SubResource( 3 )

[sub_resource type="OpenSimplexNoise" id=5]
octaves = 7
period = 78.0
persistence = 0.002
lacunarity = 0.34

[sub_resource type="NoiseTexture" id=6]
width = 64
height = 64
seamless = true
noise = SubResource( 5 )

[sub_resource type="Shader" id=7]
code = "shader_type canvas_item;
uniform vec2 scrollSpeed = vec2(1.0,1.0);
uniform sampler2D texture2;
uniform sampler2D gradient;
uniform float col1Bonus = 0.0;
uniform float col2Bonus = 0.0;

void fragment(){
	float color1 = col1Bonus + texture(TEXTURE, UV + scrollSpeed * TIME).r;
	float color2 = col2Bonus + texture(texture2, UV + scrollSpeed * TIME).r;
	float energ = color1 * color2 - (0.4 - UV.y);
	COLOR = texture(gradient, vec2(energ));
}"

[sub_resource type="Gradient" id=8]
offsets = PoolRealArray( 0.0418006, 0.196141, 0.459807, 0.572347, 0.649518, 0.762058 )
colors = PoolColorArray( 0, 0, 0, 0, 0, 0, 0, 0.427451, 0.597656, 0.0983448, 0.0466919, 1, 1, 0.469911, 0, 1, 1, 0.773865, 0.238281, 1, 0.855469, 0.843564, 0.815369, 1 )

[sub_resource type="GradientTexture" id=9]
gradient = SubResource( 8 )

[sub_resource type="ShaderMaterial" id=10]
shader = SubResource( 7 )
shader_param/scrollSpeed = Vector2( -0.231, 0.582 )
shader_param/col1Bonus = 0.0
shader_param/col2Bonus = 0.0
shader_param/texture2 = ExtResource( 2 )
shader_param/gradient = SubResource( 9 )

[sub_resource type="OpenSimplexNoise" id=11]
octaves = 5
period = 19.3
persistence = 0.44
lacunarity = 2.13

[sub_resource type="NoiseTexture" id=12]
width = 64
height = 64
seamless = true
noise = SubResource( 11 )

[sub_resource type="Shader" id=25]
code = "shader_type canvas_item;
uniform vec2 scrollSpeed = vec2(1.0,1.0);
uniform sampler2D texture2;
uniform sampler2D gradient;
uniform float FPS = 30.0;
uniform float col1bonus = 0.0;
uniform float col2bonus = 0.0;


void fragment(){
	float color1 = col1bonus + texture(TEXTURE, UV).r;
	float color2 = col2bonus + texture(texture2, UV + scrollSpeed * round(TIME*(FPS)) ).r;
	float energ = color1 * color2 ;
	COLOR = texture(gradient, vec2(energ));
}"

[sub_resource type="Gradient" id=58]
interpolation_mode = 1
offsets = PoolRealArray( 0.073955, 0.456592, 0.559486, 0.745981 )
colors = PoolColorArray( 0.12648, 0.12648, 0.899414, 0, 0.117647, 0.368627, 0.85098, 0.501961, 0.204335, 0.287926, 0.458204, 1, 0.24994, 0.240856, 0.598633, 0.627451 )

[sub_resource type="GradientTexture" id=59]
gradient = SubResource( 58 )
width = 20

[sub_resource type="ShaderMaterial" id=60]
shader = SubResource( 25 )
shader_param/scrollSpeed = Vector2( 0, 0.05 )
shader_param/FPS = 12.0
shader_param/col1bonus = 0.679
shader_param/col2bonus = -0.312
shader_param/texture2 = ExtResource( 8 )
shader_param/gradient = SubResource( 59 )

[sub_resource type="AtlasTexture" id=18]
atlas = ExtResource( 4 )
region = Rect2( 0, 0, 32, 32 )

[sub_resource type="AtlasTexture" id=19]
atlas = ExtResource( 4 )
region = Rect2( 32, 0, 32, 32 )

[sub_resource type="AtlasTexture" id=20]
atlas = ExtResource( 4 )
region = Rect2( 64, 0, 32, 32 )

[sub_resource type="AtlasTexture" id=21]
atlas = ExtResource( 4 )
region = Rect2( 96, 0, 32, 32 )

[sub_resource type="AtlasTexture" id=22]
atlas = ExtResource( 4 )
region = Rect2( 128, 0, 32, 32 )

[sub_resource type="AtlasTexture" id=23]
atlas = ExtResource( 4 )
region = Rect2( 160, 0, 32, 32 )

[sub_resource type="SpriteFrames" id=24]
animations = [ {
"frames": [ SubResource( 18 ), SubResource( 19 ), SubResource( 20 ), SubResource( 21 ), SubResource( 22 ), SubResource( 23 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[sub_resource type="Gradient" id=26]
interpolation_mode = 1
offsets = PoolRealArray( 0.318328, 0.392283, 0.59164, 0.678457 )
colors = PoolColorArray( 0.12648, 0.12648, 0.899414, 0, 0.258824, 0.364706, 0.580392, 1, 0.380392, 0.65098, 0.764706, 1, 0.803922, 0.878431, 0.901961, 1 )

[sub_resource type="GradientTexture" id=27]
gradient = SubResource( 26 )
width = 20

[sub_resource type="ShaderMaterial" id=28]
shader = SubResource( 25 )
shader_param/scrollSpeed = Vector2( 0, 0.05 )
shader_param/FPS = 12.0
shader_param/col1bonus = 0.0
shader_param/col2bonus = 0.0
shader_param/texture2 = ExtResource( 9 )
shader_param/gradient = SubResource( 27 )

[sub_resource type="Shader" id=52]
code = "shader_type canvas_item;
uniform vec2 scrollSpeed = vec2(1.0,1.0);
uniform sampler2D texture2;
uniform sampler2D gradient;
uniform float FPS = 30.0;
uniform float col1bonus = 0.0;
uniform float col2bonus = 0.0;


void fragment(){
	float color1 = col1bonus + texture(TEXTURE, UV).r;
	float color2 = col2bonus + texture(texture2, UV + scrollSpeed * round(TIME*(FPS)) ).r;
	float energ = color1 * color2 ;
	COLOR = texture(gradient, vec2(energ));
}"

[sub_resource type="Gradient" id=29]
interpolation_mode = 1
offsets = PoolRealArray( 0.102894, 0.266881, 0.382637, 0.430868 )
colors = PoolColorArray( 0.12549, 0, 0.145098, 0, 0.74902, 0.976471, 0.298039, 0.305882, 0.569706, 0.933594, 0.481384, 1, 0.177619, 0.742188, 0.0405884, 1 )

[sub_resource type="GradientTexture" id=30]
gradient = SubResource( 29 )
width = 20

[sub_resource type="ShaderMaterial" id=53]
shader = SubResource( 52 )
shader_param/scrollSpeed = Vector2( 0.05, 0.05 )
shader_param/FPS = 8.0
shader_param/col1bonus = -0.697
shader_param/col2bonus = 0.149
shader_param/texture2 = ExtResource( 3 )
shader_param/gradient = SubResource( 30 )

[sub_resource type="Animation" id=54]
resource_name = "New Anim"
length = 4.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col1bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5, 2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ -0.697, 0.029, 0.029 ]
}

[sub_resource type="Animation" id=55]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.149 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:material:shader_param/col1bonus")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ -0.697 ]
}

[sub_resource type="Gradient" id=56]
interpolation_mode = 1
offsets = PoolRealArray( 0.151125, 0.347267, 0.379421, 0.491961 )
colors = PoolColorArray( 0.12549, 0, 0.145098, 0, 0.356863, 0.0588235, 0.537255, 0.717647, 0.14902, 0.0627451, 0.2, 1, 0, 0, 0, 1 )

[sub_resource type="GradientTexture" id=57]
gradient = SubResource( 56 )
width = 20

[sub_resource type="ShaderMaterial" id=31]
shader = SubResource( 25 )
shader_param/scrollSpeed = Vector2( 0.05, -0.05 )
shader_param/FPS = 8.0
shader_param/col1bonus = 0.0
shader_param/col2bonus = 0.101
shader_param/texture2 = ExtResource( 9 )
shader_param/gradient = SubResource( 57 )

[sub_resource type="Animation" id=44]
resource_name = "New Anim"
length = 5.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 2.5, 4 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ 0.101, -0.533, 0.574 ]
}

[sub_resource type="Animation" id=45]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.101 ]
}

[sub_resource type="Gradient" id=35]
interpolation_mode = 1
offsets = PoolRealArray( 0, 0.308682, 0.463023, 0.652733, 0.810289 )
colors = PoolColorArray( 0.388235, 0.309804, 0, 0, 0.759125, 0.976562, 0.874639, 1, 0.632843, 0.910156, 0.798133, 1, 0.594543, 0.746094, 0.701046, 1, 0.480042, 0.551229, 0.558594, 1 )

[sub_resource type="GradientTexture" id=36]
gradient = SubResource( 35 )
width = 20

[sub_resource type="ShaderMaterial" id=37]
shader = SubResource( 25 )
shader_param/scrollSpeed = Vector2( -0.1, 0.05 )
shader_param/FPS = 8.0
shader_param/col1bonus = -0.518
shader_param/col2bonus = 0.346
shader_param/texture2 = ExtResource( 12 )
shader_param/gradient = SubResource( 36 )

[sub_resource type="Animation" id=46]
resource_name = "New Anim"
length = 8.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 6.4 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.346, -0.549 ]
}

[sub_resource type="Animation" id=47]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.346 ]
}

[sub_resource type="Gradient" id=32]
interpolation_mode = 1
offsets = PoolRealArray( 0.0932476, 0.241158, 0.5209, 0.646302, 0.765273 )
colors = PoolColorArray( 0.12549, 0, 0.145098, 0, 1, 0.0196078, 0.0196078, 0.462745, 0.959961, 0.410608, 0, 1, 1, 0.721569, 0.0470588, 1, 1, 0.968445, 0.632812, 1 )

[sub_resource type="GradientTexture" id=33]
gradient = SubResource( 32 )
width = 20

[sub_resource type="ShaderMaterial" id=34]
shader = SubResource( 25 )
shader_param/scrollSpeed = Vector2( 0.05, 0.1 )
shader_param/FPS = 8.0
shader_param/col1bonus = -0.044
shader_param/col2bonus = 0.118
shader_param/texture2 = ExtResource( 12 )
shader_param/gradient = SubResource( 33 )

[sub_resource type="Animation" id=48]
resource_name = "New Anim"
length = 4.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.5, 1.8, 2.7, 3 ),
"transitions": PoolRealArray( 1, 1, 1, -2, 1 ),
"update": 0,
"values": [ 0.122, 0.122, -0.498, -0.5, -0.142 ]
}

[sub_resource type="Animation" id=49]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/col2bonus")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.118 ]
}

[sub_resource type="Shader" id=38]
code = "shader_type canvas_item;

uniform sampler2D texture1;
uniform sampler2D texture2;

uniform vec2 scorll1 = vec2(0.05,-0.05);
uniform vec2 scorll2 = vec2(0.05,0.05);

uniform float col1Bonus = 0.0;
uniform float col2Bonus = 0.0;

uniform sampler2D lifetimeGradient;
uniform sampler2D overlapGradient;


uniform float FPS = 8.0;
uniform float sharpnes = 1.0;
varying float lifetime;

void vertex() {
	lifetime = INSTANCE_CUSTOM.y;
}

void fragment(){
	
	float particleSeed = COLOR.r / (COLOR.r + COLOR.b + COLOR.g);
	
	float adjustedTime = round( (TIME+particleSeed) * FPS);
	
	float intesity = (col1Bonus + texture(texture1, UV + scorll1 * adjustedTime).r ) * ( col2Bonus + texture(texture2, UV + scorll2 * adjustedTime).r );
	
	vec4 overlapColor = texture(overlapGradient, vec2(intesity*3.0));
	
	vec4 lifetimeColor = texture(lifetimeGradient, vec2(lifetime));
	COLOR = lifetimeColor * overlapColor;
	COLOR.a *= min(1.0, intesity * sharpnes) * texture(TEXTURE,UV).a;



}"

[sub_resource type="Gradient" id=40]
interpolation_mode = 2
offsets = PoolRealArray( 0.353698, 0.88746, 1 )
colors = PoolColorArray( 1, 1, 1, 1, 0.44855, 0.512179, 0.501574, 0.0985915, 0.388235, 0.458824, 0.447059, 0 )

[sub_resource type="GradientTexture" id=41]
gradient = SubResource( 40 )

[sub_resource type="Gradient" id=42]
interpolation_mode = 1
offsets = PoolRealArray( 0.0932476, 0.170418, 0.511254, 0.807074, 0.897106, 1 )
colors = PoolColorArray( 0, 0, 0, 0, 0.251207, 0, 0.362305, 1, 1, 0.317647, 0.317647, 0, 0.419608, 0.286275, 0.713726, 1, 0.0849609, 0.0817951, 0.0630569, 1, 0, 0, 0, 1 )

[sub_resource type="GradientTexture" id=43]
gradient = SubResource( 42 )

[sub_resource type="ShaderMaterial" id=39]
shader = SubResource( 38 )
shader_param/scorll1 = Vector2( -0.05, 0.05 )
shader_param/scorll2 = Vector2( 0.5, -0.1 )
shader_param/col1Bonus = -0.429
shader_param/col2Bonus = 0.107
shader_param/FPS = 8.0
shader_param/sharpnes = 2.0
shader_param/texture1 = ExtResource( 8 )
shader_param/texture2 = ExtResource( 12 )
shader_param/lifetimeGradient = SubResource( 41 )
shader_param/overlapGradient = SubResource( 43 )

[sub_resource type="ParticlesMaterial" id=13]
flag_disable_z = true
direction = Vector3( 0, -1, 0 )
spread = 0.0
gravity = Vector3( 0, -30, 0 )
orbit_velocity = 0.0
orbit_velocity_random = 0.0
hue_variation = 1.0
hue_variation_random = 1.0

[sub_resource type="Animation" id=50]
resource_name = "New Anim"
length = 2.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.5, 1, 2 ),
"transitions": PoolRealArray( 1, 2, 0.5, -2 ),
"update": 0,
"values": [ Vector2( 20.8784, 70.8045 ), Vector2( 32.1352, 23.6584 ), Vector2( 72.6597, 70.8045 ), Vector2( 20.8784, 70.8045 ) ]
}

[sub_resource type="Animation" id=51]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector2( 20.8784, 70.8045 ) ]
}

[node name="Shaders" type="Node2D"]
position = Vector2( 4.7247, -3.46478 )

[node name="Sprite" type="Sprite" parent="."]
visible = false
material = SubResource( 4 )
position = Vector2( 141.791, 131.055 )
texture = SubResource( 6 )
centered = false
region_rect = Rect2( 200, 200, 60, 60 )

[node name="Sprite2" type="Sprite" parent="."]
material = SubResource( 10 )
position = Vector2( 232.789, 168.404 )
texture = SubResource( 12 )

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
zoom = Vector2( 0.5, 0.5 )

[node name="Wisp4" type="Sprite" parent="."]
show_behind_parent = true
material = SubResource( 60 )
position = Vector2( 376.261, 53.7281 )
texture = ExtResource( 14 )

[node name="Orb1" type="Sprite" parent="Wisp4"]
modulate = Color( 0.290196, 0.6, 0.803922, 1 )
show_behind_parent = true
position = Vector2( 0, 10.727 )
scale = Vector2( 0.08, 0.08 )
texture = ExtResource( 15 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
position = Vector2( 102.454, 37.8141 )
frames = SubResource( 24 )
playing = true

[node name="Wisp" type="Sprite" parent="AnimatedSprite"]
show_behind_parent = true
material = SubResource( 28 )
position = Vector2( 0.0904694, -10.6925 )
texture = ExtResource( 7 )

[node name="Sprite3" type="Sprite" parent="."]
material = SubResource( 53 )
position = Vector2( 77.2735, 135.199 )
texture = ExtResource( 6 )
flip_v = true
__meta__ = {
"_editor_description_": ""
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="Sprite3"]
autoplay = "New Anim"
"anims/New Anim" = SubResource( 54 )
anims/RESET = SubResource( 55 )

[node name="Camera2D2" type="Camera2D" parent="."]
position = Vector2( 210.484, 80.2293 )
zoom = Vector2( 0.5, 0.5 )

[node name="Wisp2" type="Sprite" parent="."]
show_behind_parent = true
material = SubResource( 31 )
position = Vector2( 195.994, 50.0114 )
texture = ExtResource( 11 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Wisp2"]
autoplay = "New Anim"
"anims/New Anim" = SubResource( 44 )
anims/RESET = SubResource( 45 )

[node name="Wisp3" type="Sprite" parent="."]
show_behind_parent = true
material = SubResource( 37 )
position = Vector2( 269.074, 74.4001 )
texture = ExtResource( 13 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Wisp3"]
autoplay = "New Anim"
"anims/New Anim" = SubResource( 46 )
anims/RESET = SubResource( 47 )

[node name="Flame1" type="Sprite" parent="."]
show_behind_parent = true
material = SubResource( 34 )
position = Vector2( 141.257, 62.5207 )
texture = ExtResource( 10 )
__meta__ = {
"_editor_description_": ""
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="Flame1"]
autoplay = "New Anim"
"anims/New Anim" = SubResource( 48 )
anims/RESET = SubResource( 49 )

[node name="Guide" type="Sprite" parent="."]
position = Vector2( 20.8784, 70.8045 )
texture = ExtResource( 5 )

[node name="Particles2D" type="Particles2D" parent="Guide"]
self_modulate = Color( 2, 2, 2, 1 )
show_behind_parent = true
material = SubResource( 39 )
position = Vector2( -0.768234, 0.789001 )
amount = 6
lifetime = 0.8
local_coords = false
process_material = SubResource( 13 )
texture = ExtResource( 5 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Guide"]
autoplay = "New Anim"
"anims/New Anim" = SubResource( 50 )
anims/RESET = SubResource( 51 )
